<!DOCTYPE html>
<html>
<head>
    <title>Student List</title>
</head>
<body>
    <a href="{% url 'home'%}"><button>Home</button></a>
    <a href="{% url 'admission_home'%}"><button>Back</button></a>
    <h2>Admitted Students</h2>

    <form method="get">
        <label>Class:</label>
        <select name="class_id">
            <option value="">All</option>
            {% for cls in classes %}
                <option value="{{ cls.id }}" {% if selected_class == cls.id|stringformat:"s" %}selected{% endif %}>{{ cls.name }}</option>
            {% endfor %}
        </select>

        <label>Year:</label>
        <select name="year_id">
            <option value="">All</option>
            {% for year in years %}
                <option value="{{ year.id }}" {% if selected_year == year.id|stringformat:"s" %}selected{% endif %}>{{ year.name }}</option>
            {% endfor %}
        </select>

        <label>Name:</label>
        <input type="text" name="name" value="{{ name_query }}">

        <button type="submit">Filter</button>
    </form>

    <hr>

    <table border="1" cellpadding="5">
        <tr>
            <th>Admission No</th>
            <th>Name</th>
            <th>Gender</th>
            <th>DOB</th>
            <th>Contact</th>
            <th>Email</th>
        </tr>
        {% for student in students %}
        <tr>
            <td>{{ student.admission_no }}</td>
            <td>{{ student.full_name }}</td>
            <td>{{ student.gender }}</td>
            <td>{{ student.date_of_birth }}</td>
            <td>{{ student.contact_number }}</td>
            <td>{{ student.email }}</td>
            <td>
                <a href="{% url 'assign_class_year' student.id %}">Assign Class/Year</a>
            </td>
            <td>
                <a href="{% url 'view_academic_records' student.id %}">View Records</a>
            </td>
            <td>
                <a href="{% url 'student_profile' student.id %}">Profile</a>
            </td>
        </tr>
        {% empty %}
        <tr><td colspan="6">No students found.</td></tr>
        {% endfor %}
    </table>
</body>
</html>
