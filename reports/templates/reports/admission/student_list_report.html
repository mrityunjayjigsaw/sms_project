<!DOCTYPE html>
<html>
<head>
    <title>Student List Report</title>
</head>
<body>
    <h2>Student List Report</h2>

    <form method="get">
        <label>Academic Year:</label>
        <select name="academic_year">
            <option value="">All</option>
            {% for year in academic_years %}
                <option value="{{ year.id }}" {% if selected_year == year.id|stringformat:"s" %}selected{% endif %}>
                    {{ year.name }}
                </option>
            {% endfor %}
        </select>

        <label>Class:</label>
        <select name="class_id">
            <option value="">All</option>
            {% for cls in classes %}
                <option value="{{ cls.id }}" {% if selected_class == cls.id|stringformat:"s" %}selected{% endif %}>
                    {{ cls.name }}
                </option>
            {% endfor %}
        </select>

        <button type="submit">Filter</button>
    </form>

    {% if records %}
    <form method="get" action="{% url 'export_student_list_report' %}">
        <input type="hidden" name="academic_year" value="{{ selected_year }}">
        <input type="hidden" name="class_id" value="{{ selected_class }}">
        <button type="submit">‚¨á Export to Excel</button>
    </form>
    <button onclick="window.print()">üñ® Print Report</button>

    <table border="1" cellpadding="5" cellspacing="0">
        <tr>
            <th>Admission No</th>
            <th>Full Name</th>
            <th>Gender</th>
            <th>Class</th>
            <th>Academic Year</th>
            <th>Mobile No</th>
        </tr>
        {% for record in records %}
            <tr>
                <td>{{ record.student.admission_no }}</td>
                <td>{{ record.student.full_name }}</td>
                <td>{{ record.student.gender }}</td>
                <td>{{ record.class_enrolled.name }}</td>
                <td>{{ record.academic_year.name }}</td>
                <td>{{ record.student.mobile_no }}</td>
            </tr>
        {% endfor %}
    </table>
    {% else %}
    <p>No students found for selected filters.</p>
    {% endif %}


    <br><a href="{% url 'reports_home' %}">‚Üê Back to Reports Home</a>
</body>
</html>
